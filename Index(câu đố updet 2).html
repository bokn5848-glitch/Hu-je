<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>CÃ¢u Äá»‘ Tá»•ng Há»£p</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Arial;background:#f2f2f2;text-align:center;padding:20px}
.box{background:#fff;max-width:520px;margin:auto;padding:20px;border-radius:12px}
button{padding:10px;margin:6px;border:none;border-radius:8px;font-size:15px;color:#fff;background:#4CAF50}
.answer{display:block;width:100%;background:#2196F3}
#hint{color:#ff5722;font-weight:bold}
select{padding:8px;border-radius:6px;font-size:15px}
#result{
position:fixed;top:0;left:0;width:100%;height:100%;
background:rgba(0,0,0,0.6);display:none;
align-items:center;justify-content:center;z-index:999}
#result div{
background:#fff;padding:30px 40px;border-radius:16px;
font-size:36px;font-weight:bold}
.correct{color:#4CAF50}
.wrong{color:#f44336}
</style>
</head>
<body>

<div class="box" id="menu">
<h2>ğŸ§  CÃ‚U Äá» Tá»”NG Há»¢P</h2>

<p>ğŸ“š Chá»n loáº¡i cÃ¢u Ä‘á»‘</p>
<select id="type">
<option value="meo">Äá»‘ máº¹o</option>
<option value="toan">Äá»‘ toÃ¡n</option>
<option value="eng">Äá»‘ tiáº¿ng Anh</option>
<option value="his">Äá»‘ lá»‹ch sá»­</option>
<option value="geo">Äá»‘ Ä‘á»‹a lÃ½</option>
</select>

<p>âš™ï¸ Chá»n cáº¥p Ä‘á»™</p>
<button onclick="start('easy')">Dá»…</button>
<button onclick="start('medium')">Trung bÃ¬nh</button>
<button onclick="start('hard')">KhÃ³</button>
</div>

<div class="box" id="game" style="display:none">
<h3 id="question"></h3>
<div id="answers"></div>
<button onclick="useHint()">ğŸ’¡ Gá»£i Ã½ (-3 Ä‘iá»ƒm)</button>
<p id="hint"></p>
<p id="score"></p>
</div>

<div id="result"><div id="resultText"></div></div>

<script>
// ===== DOM =====
const menu=menu=document.getElementById("menu");
const game=document.getElementById("game");
const question=document.getElementById("question");
const answers=document.getElementById("answers");
const scoreBox=document.getElementById("score");
const hintBox=document.getElementById("hint");
const typeSelect=document.getElementById("type");
const result=document.getElementById("result");
const resultText=document.getElementById("resultText");

// ===== Ã‚M THANH =====
const ctx=new(window.AudioContext||window.webkitAudioContext)();
const beep=(f,d)=>{
const o=ctx.createOscillator(),g=ctx.createGain();
o.frequency.value=f;o.connect(g);g.connect(ctx.destination);
o.start();g.gain.setValueAtTime(0.3,ctx.currentTime);
g.gain.exponentialRampToValueAtTime(0.001,ctx.currentTime+d);
o.stop(ctx.currentTime+d);
};

// ===== TRá»˜N =====
const shuffle=a=>{
for(let i=a.length-1;i>0;i--){
const j=Math.floor(Math.random()*(i+1));
[a[i],a[j]]=[a[j],a[i]];
}};

// ===== DATA =====
const questions=[];
const add=(t,c,o,l,type,h)=>questions.push({t,c,o,l,type,h});

/* ======================
   SINH 240 CÃ‚U / LOáº I
   ====================== */

// ğŸ§  Äá» Máº¸O
["easy","medium","hard"].forEach((lv,idx)=>{
for(let i=1;i<=80;i++)
add(`(Äá»‘ máº¹o ${lv}) CÃ¢u ${i}: CÃ¡i gÃ¬ cÃ ng rá»­a cÃ ng báº©n?`,
"NÆ°á»›c",
["NÆ°á»›c","KhÄƒn","XÃ  phÃ²ng","Ão quáº§n"],
lv,"meo","DÃ¹ng Ä‘á»ƒ rá»­a");
});

// â• Äá» TOÃN
["easy","medium","hard"].forEach((lv,m)=>{
for(let i=1;i<=80;i++){
let a=i+m*2,b=i+2+m;
add(`(ToÃ¡n ${lv}) ${a} + ${b} = ?`,
""+(a+b),
[""+(a+b),""+(a+b+1),""+(a+b-1),""+(a*2)],
lv,"toan","Cá»™ng sá»‘");
}});

// ğŸ‡¬ğŸ‡§ TIáº¾NG ANH
["easy","medium","hard"].forEach(lv=>{
for(let i=1;i<=80;i++)
add(`(English ${lv}) Apple means?`,
"Quáº£ tÃ¡o",
["Quáº£ tÃ¡o","Quáº£ cam","Quáº£ chuá»‘i","Quáº£ nho"],
lv,"eng","Tá»« vá»±ng");
});

// ğŸ› Lá»ŠCH Sá»¬
["easy","medium","hard"].forEach(lv=>{
for(let i=1;i<=80;i++)
add(`(Lá»‹ch sá»­ ${lv}) Vua Ä‘áº§u tiÃªn VN lÃ  ai?`,
"HÃ¹ng VÆ°Æ¡ng",
["HÃ¹ng VÆ°Æ¡ng","LÃ½ ThÃ¡i Tá»•","Quang Trung","Gia Long"],
lv,"his","Dá»±ng nÆ°á»›c");
});

// ğŸŒ Äá»ŠA LÃ
["easy","medium","hard"].forEach(lv=>{
for(let i=1;i<=80;i++)
add(`(Äá»‹a lÃ½ ${lv}) Thá»§ Ä‘Ã´ Viá»‡t Nam lÃ  gÃ¬?`,
"HÃ  Ná»™i",
["HÃ  Ná»™i","Huáº¿","ÄÃ  Náºµng","TP.HCM"],
lv,"geo","Thá»§ Ä‘Ã´");
});

// ===== GAME =====
let list=[],i=0,score=0,usedHint=false;

function start(level){
ctx.resume();
const type=typeSelect.value;
list=questions.filter(q=>q.l===level && q.type===type);
shuffle(list);
i=0;score=0;
menu.style.display="none";
game.style.display="block";
show();
}

function show(){
usedHint=false;
hintBox.innerText="";
if(i>=list.length){
question.innerText="ğŸ‰ HoÃ n thÃ nh!";
answers.innerHTML=`<h3>Äiá»ƒm: ${score}/${list.length}</h3>
<button onclick="location.reload()">ğŸ” ChÆ¡i láº¡i</button>`;
return;
}
const q=list[i];
question.innerText=q.t;
scoreBox.innerText=`CÃ¢u ${i+1}/${list.length} | Äiá»ƒm: ${score}`;
answers.innerHTML="";
const opts=[...q.o];
shuffle(opts);
opts.forEach(x=>{
const b=document.createElement("button");
b.className="answer";
b.innerText=x;
b.onclick=()=>{
if(x===q.c){score++;beep(800,0.2);showResult(true);}
else{beep(200,0.4);showResult(false);}
};
answers.appendChild(b);
});
}

function showResult(ok){
result.style.display="flex";
resultText.innerHTML=ok?"ğŸ‰ ÄÃšNG âœ”ï¸":"âŒ SAI";
resultText.className=ok?"correct":"wrong";
setTimeout(()=>{
result.style.display="none";
i++;show();
},600);
}

function useHint(){
if(usedHint) return;
score=Math.max(0,score-3);
hintBox.innerText="ğŸ’¡ "+list[i].h;
usedHint=true;
scoreBox.innerText=`CÃ¢u ${i+1}/${list.length} | Äiá»ƒm: ${score}`;
}
</script>
</body>
</html>
